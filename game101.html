<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Fantasy Interactive Journey</title>
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body {
    font-family: 'Inter', 'Roboto', sans-serif;
    overflow-x: hidden;
    overflow-y: scroll;
    height: 400vh;
    background: linear-gradient(180deg, #1b1a2f, #5d4b8b);
    color: #fff;
    transition: background 0.5s ease;
}
canvas { display: block; position: fixed; top:0; left:0; z-index: 0; }
#info {
    position: fixed;
    top: 20px; left: 20px;
    font-size: 16px;
    background: rgba(0,0,0,0.4);
    padding: 12px 18px;
    border-radius: 12px;
    max-width: 320px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.5);
    backdrop-filter: blur(4px);
    z-index: 10;
}
.tooltip {
    position: fixed;
    background: rgba(70,20,90,0.95);
    color: #fff;
    padding: 12px 18px;
    border-radius: 16px;
    pointer-events: none;
    font-size: 15px;
    display: none;
    max-width: 300px;
    line-height: 1.5;
    box-shadow: 0 6px 20px rgba(0,0,0,0.5);
    transition: all 0.3s ease;
    z-index: 10;
}
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="info">Scroll nach unten f端r Abenteuer, nach oben f端r zur端ck. Klicke auf Plattformen f端r Details.</div>
<div class="tooltip" id="tooltip"></div>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// Smooth interpolation function
function lerp(start, end, t){ return start + (end - start) * t; }

class Player {
    constructor(){
        this.width = 50;
        this.height = 50;
        this.x = window.scrollY;
        this.y = canvas.height/2;
        this.targetY = this.y;
        this.color = '#ffb347';
        this.shadowColor = 'rgba(0,0,0,0.4)';
    }
    draw(offsetX){
        ctx.save();
        ctx.shadowColor = this.shadowColor;
        ctx.shadowBlur = 12;
        ctx.fillStyle = this.color;
        ctx.fillRect(this.x - offsetX, this.y, this.width, this.height);
        ctx.restore();
    }
    update(pathY){
        this.targetY = pathY;
        this.y = lerp(this.y, this.targetY, 0.12);
    }
}

class Platform {
    constructor(x, y, w, h, color='#7f5af0', label='', info=''){
        this.x = x;
        this.y = y;
        this.width = w;
        this.height = h;
        this.color = color;
        this.label = label;
        this.info = info;
        this.hovered = false;
        this.glow = 0;
    }
    draw(offsetX){
        this.glow = lerp(this.glow, this.hovered ? 1 : 0, 0.1);
        let gradient = ctx.createLinearGradient(this.x - offsetX, this.y, this.x - offsetX + this.width, this.y + this.height);
        gradient.addColorStop(0, this.color);
        gradient.addColorStop(1, `rgba(255,255,255,${0.2 + this.glow*0.3})`);
        ctx.fillStyle = gradient;
        roundRect(ctx, this.x - offsetX, this.y, this.width, this.height, 12, true, false);
        if(this.label){
            ctx.fillStyle = '#fff';
            ctx.font = 'bold 18px Inter';
            ctx.fillText(this.label, this.x + 15 - offsetX, this.y + this.height/2 + 6);
        }
    }
    isHovered(mouseX, mouseY, offsetX){
        return mouseX >= this.x - offsetX && mouseX <= this.x - offsetX + this.width && mouseY >= this.y && mouseY <= this.y + this.height;
    }
}

class Goal {
    constructor(x, y, size=100){
        this.x = x;
        this.y = y;
        this.size = size;
        this.color = '#f3a683';
        this.pulse = 0;
    }
    draw(offsetX){
        this.pulse += 0.05;
        let scale = 1 + 0.05 * Math.sin(this.pulse);
        ctx.save();
        ctx.translate(this.x - offsetX + this.size/2, this.y + this.size/2);
        ctx.scale(scale, scale);
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.moveTo(-this.size/2, -this.size/2);
        ctx.lineTo(0, this.size/2);
        ctx.lineTo(this.size/2, -this.size/2);
        ctx.closePath();
        ctx.shadowColor = this.color;
        ctx.shadowBlur = 20;
        ctx.fill();
        ctx.restore();
    }
}

function roundRect(ctx, x, y, width, height, radius, fill, stroke){
    if(typeof stroke==='undefined'){ stroke=true; }
    if(typeof radius==='undefined'){ radius=5; }
    if(typeof radius==='number'){ radius={tl: radius,tr: radius,br: radius,bl: radius}; }
    else { let defaultRadius={tl:0,tr:0,br:0,bl:0}; for(let side in defaultRadius){ radius[side]=radius[side]||0; } }
    ctx.beginPath();
    ctx.moveTo(x+radius.tl, y);
    ctx.lineTo(x+width-radius.tr, y);
    ctx.quadraticCurveTo(x+width, y, x+width, y+radius.tr);
    ctx.lineTo(x+width, y+height-radius.br);
    ctx.quadraticCurveTo(x+width, y+height, x+width-radius.br, y+height);
    ctx.lineTo(x+radius.bl, y+height);
    ctx.quadraticCurveTo(x, y+height, x, y+height-radius.bl);
    ctx.lineTo(x, y+radius.tl);
    ctx.quadraticCurveTo(x, y, x+radius.tl, y);
    ctx.closePath();
    if(fill) ctx.fill();
    if(stroke) ctx.stroke();
}

const player = new Player();
const platforms = [
    new Platform(0, canvas.height-50, 500, 50, '#9b59b6', 'Intro', 'Willkommen zu Fantasy.co!'),
    new Platform(600, canvas.height-150, 250, 25, '#e74c3c', 'Features', 'Interaktive Story, Multiplayer, AI-Integration'),
    new Platform(950, canvas.height-250, 300, 25, '#3498db', 'Experience', 'Unsere bisherigen Abenteuer und Projekte'),
    new Platform(1350, canvas.height-180, 250, 25, '#f1c40f', 'Hobbies', 'Entwicklung, Gaming, Kreative Tools'),
    new Platform(1700, canvas.height-220, 300, 25, '#2ecc71', 'Projects', 'Interaktive Erlebnisse, Story-Tools')
];
const goal = new Goal(2100, canvas.height-280-50);
const tooltip = document.getElementById('tooltip');

function gameLoop(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    player.x = lerp(player.x, window.scrollY + canvas.width/4, 0.1);

    let pathY = canvas.height - 50 - player.height;
    for(let p of platforms){
        if(player.x + player.width/2 >= p.x && player.x + player.width/2 <= p.x + p.width){
            pathY = p.y - player.height;
            break;
        }
    }
    player.update(pathY);

    const offsetX = window.scrollY;
    platforms.forEach(p => p.draw(offsetX));
    goal.draw(offsetX);
    player.draw(offsetX);

    requestAnimationFrame(gameLoop);
}

gameLoop();

window.addEventListener('resize', ()=>{
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
});

canvas.addEventListener('mousemove', (e)=>{
    const mouseX = e.clientX;
    const mouseY = e.clientY;
    let found = false;
    for(let p of platforms){
        if(p.isHovered(mouseX, mouseY, window.scrollY)){
            p.hovered = true;
            tooltip.style.display = 'block';
            tooltip.style.left = mouseX + 20 + 'px';
            tooltip.style.top = mouseY + 20 + 'px';
            tooltip.style.opacity = '1';
            tooltip.textContent = p.info;
            found = true;
        } else p.hovered = false;
    }
    if(!found) tooltip.style.opacity = '0';
    if(!found) setTimeout(()=>{ tooltip.style.display='none'; },300);
});

canvas.addEventListener('click', (e)=>{
    const mouseX = e.clientX;
    const mouseY = e.clientY;
    if(mouseX >= goal.x - window.scrollY && mouseX <= goal.x - window.scrollY + goal.size &&
       mouseY >= goal.y && mouseY <= goal.y + goal.size){
        window.open('https://fantasy.co/start', '_blank');
    }
});
</script>
</body>
</html>
